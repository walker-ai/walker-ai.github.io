---
title: ã€ŠHOT100ã€‹
subtitle:
date: 2025-03-26T10:19:52+08:00
slug: a4da344
draft: false
author:
  name: yitao
categories: [æ‰¾å·¥ä½œ]
tags:
---

ã€ŠHOT100ã€‹åšé¢˜è®°å½•

<!--more-->


### 5.æœ€é•¿å›æ–‡å­ä¸²

> [ğŸ”—](https://leetcode.cn/problems/longest-palindromic-substring/description/?envType=study-plan-v2&envId=top-100-liked)
> ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s`ï¼Œæ‰¾åˆ° `s` ä¸­æœ€é•¿çš„ å›æ–‡ å­ä¸²ã€‚

```cpp
class Solution {
    static const int N = 1e3 + 10;
    static const int p[N], b[N];
public:
    string longestPalindrome(string s) {
        // ç”¨ manacher ç®—æ³•æ±‚è§£
        int k = 0, n = 0;

        auto init = [&]() {
            b[k ++ ] = '$', b[k ++ ] = '#';
            for (auto c : s) {
                b[k ++ ] = c;
                b[k ++ ] = '#';
            }
            b[k ++ ] = '^';
            n = k;
        };

        init();

        auto manacher = [$]() {
            int mr = 0, mid = 0;
            for (int i = 1; i < n; i ++ ) {
                if (i < mr) p[i] = max(2 * mid - i, mr - i);
                else p[i] = 1;

                while (b[i - p[i]] == b[i + p[i]]) p[i] ++ ;
                if (i + p[i] > mr) {
                    mr = i + p[i];
                    mid = i;
                }
            }
        };

        manacher();

        // å¦‚æœåªæ˜¯æ±‚æœ€é•¿å›æ–‡å­ä¸²çš„é•¿åº¦ï¼Œè¿”å›reså³å¯
        int res = 0, max_i = 0;
        for (int i = 0; i < n; i ++ ) {
            if (p[i] > res) {
                res = p[i];
                max_i = i;
            }
        }

        // å¦‚æœæ˜¯æ±‚å…·ä½“çš„å›æ–‡å­ä¸²ï¼Œéœ€è¦æ ¹æ®æœ€é•¿é•¿åº¦æˆªå–
        int start = max_i - (res - 1);
        int end = max_i + (res - 1);
        for (int i = start; i <= end; i ++ ) {
            if (i == 0 || i == n - 1) continue;
            if (i % 2 == 0) ans.push_back(b[i]);
        }
        return ans;
    }
};
```
